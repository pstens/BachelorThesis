notifications:
  email: false
install:
 - source ./texlive_install.sh
cache:
  directories:
    - /tmp/texlive
    - $HOME/.texlive
before_script:
- mkdir _build
- mkdir _build/chapters
script:
- cd proposal
- pdflatex -interaction=nonstopmode -halt-on-error -output-directory ../_build proposal.tex

- cd ../thesis
- pdflatex -interaction=nonstopmode -halt-on-error -output-directory ../_build thesis.tex
  # compile twice to fix poosible reference issues
- pdflatex -interaction=nonstopmode -halt-on-error -output-directory ../_build thesis.tex
- cd ..
deploy:
  provider: releases
  api_key: $GITHUB_KEY
  file_glob: true
  file: _build/*.pdf
  skip_cleanup: true
  on:
    branch: master
    tags: true
